import*as t from"react";import n,{useState as e,useLayoutEffect as r,useEffect as o}from"react";import i from"styled-components";function a(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?a(Object(e),!0).forEach((function(n){l(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function l(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function s(t,n){if(null==t)return{};var e,r,o=function(t,n){if(null==t)return{};var e,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||(o[e]=t[e]);return o}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(o[e]=t[e])}return o}function u(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,o,i=[],a=!0,c=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}(t,n)||d(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,n){if(t){if("string"==typeof t)return p(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(t,n):void 0}}function p(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}const g=new Map,h=new WeakMap;let v,m=0;function y(t){return Object.keys(t).sort().filter((n=>void 0!==t[n])).map((n=>{return`${n}_${"root"===n?(e=t.root,e?(h.has(e)||(m+=1,h.set(e,m.toString())),h.get(e)):"0"):t[n]}`;var e})).toString()}function b(t,n,e={},r=v){if(void 0===window.IntersectionObserver&&void 0!==r){const o=t.getBoundingClientRect();return n(r,{isIntersecting:r,target:t,intersectionRatio:"number"==typeof e.threshold?e.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:o,observer:i,elements:a}=function(t){let n=y(t),e=g.get(n);if(!e){const r=new Map;let o;const i=new IntersectionObserver((n=>{n.forEach((n=>{var e;const i=n.isIntersecting&&o.some((t=>n.intersectionRatio>=t));t.trackVisibility&&void 0===n.isVisible&&(n.isVisible=i),null==(e=r.get(n.target))||e.forEach((t=>{t(i,n)}))}))}),t);o=i.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),e={id:n,observer:i,elements:r},g.set(n,e)}return e}(e);let c=a.get(t)||[];return a.has(t)||a.set(t,c),c.push(n),i.observe(t),function(){c.splice(c.indexOf(n),1),0===c.length&&(a.delete(t),i.unobserve(t)),0===a.size&&(i.disconnect(),g.delete(o))}}function w({threshold:n,delay:e,trackVisibility:r,rootMargin:o,root:i,triggerOnce:a,skip:c,initialInView:l,fallbackInView:s,onChange:u}={}){const f=t.useRef(),d=t.useRef(),[p,g]=t.useState({inView:!!l});d.current=u;const h=t.useCallback((t=>{void 0!==f.current&&(f.current(),f.current=void 0),c||t&&(f.current=b(t,((t,n)=>{g({inView:t,entry:n}),d.current&&d.current(t,n),n.isIntersecting&&a&&f.current&&(f.current(),f.current=void 0)}),{root:i,rootMargin:o,threshold:n,trackVisibility:r,delay:e},s))}),[Array.isArray(n)?n.toString():n,i,o,a,c,r,s,e]);t.useEffect((()=>{f.current||!p.entry||a||c||g({inView:!!l})}));const v=[h,p.inView,p.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}function S(t){var n=u(e(0),2),o=n[0],i=n[1];return r((function(){function n(){i(Math.floor(window.pageYOffset/t)*t)}return window.addEventListener("scroll",n),n(),function(){return window.removeEventListener("scroll",n)}}),[]),o}var E,O,j,T=function(t){var n=[];if("string"==typeof t){if(4===t.length?t+="f":7===t.length&&(t+="ff"),/^#[0-9a-fA-F]{8}$/i.test(t))t.replace("#","").split(/(..)/g).filter((function(t){return t})).forEach((function(t){return n.push(Number("0x"+t))})),n[n.length-1]=n[n.length-1]/255;else{if(!/^#[0-9a-fA-F]{4}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "));t.replace("#","").split(/(.)/g).filter((function(t){return t})).forEach((function(t){return n.push(17*Number("0x"+t))})),n[n.length-1]=n[n.length-1]/255}return n}return t},x=function(t,n,e,r){if(t===n)return t;var o=t<n?n*e+(t-t*e):t-t*e+n*e;return r?r(o):o},k=function(t,n,e){var r=T(t),o=T(n);return r.map((function(t,n){return x(t,o[n],e)}))},H=function(t,n,e,r,o){var i=t+(r||0),a=i+n-i;if(a<=0)throw new Error("'scrollHeight' must be greater than zero");var c=(e-i)/a,l=c<0?0:c>1?1:c;return o&&o({isTransitioning:!!(l>0&&l<1),result:l,scrollHeight:a}),l},I=function(t,n){if("number"==typeof t)return t;if("string"==typeof t){if(/[0-9]%$/g.test(t.toString()))return n?n*(parseInt(t)/100):parseInt(t)/100;if(/[0-9](px)$/g.test(t.toString()))return console.log("".concat(t," is in pixels!")),parseInt(t);if(/[0-9](em)$/g.test(t.toString()))return console.log("".concat(t," is in em!")),16*parseInt(t);if(/^[0-9](vh)$/g.test(t.toString()))return console.log("".concat(t," is in vh!")),parseInt(t)/100*window.innerHeight;if(/^[0-9](vw)$/g.test(t.toString()))return console.log("".concat(t," is in vw!")),parseInt(t)/100*window.innerWidth}return console.warn("Couldn't find any match for",t),0},A=["length","offset"],P=["length","offset"],V=function(t){var n=t.startScroll,r=t.endScroll,i=t.fadeIn,a=t.fadeOut,l=t.keyframes,d=t.offset,p=t.disabled,g=t.callback,h=w(),v=h.ref,m=h.inView,y=h.entry,b=null==y?void 0:y.target,E=S(1),O=u(e(0),2),j=O[0],T=O[1],V=u(e({isTransitioning:!1,inView:m}),2),$=V[0],C=V[1],F=u(e({startScroll:function(t){switch(t){case"top":return document.documentElement.scrollTop;case"center":return+document.documentElement.scrollTop+document.documentElement.clientHeight/2;case"bottom":return+document.documentElement.scrollTop+document.documentElement.clientHeight;default:return t||+document.documentElement.scrollTop+document.documentElement.clientHeight}}(n||"bottom"),endScroll:r?I(r):300,scrollHeight:0}),2),R=F[0],M=F[1];function N(t,n){var e=t.opacity,r=t.transform,o=t.background,i=t.gradient,a=t.filter,l=n.current;e&&(b.style.opacity=function(t,n){return x.apply(void 0,f(t).concat([n])).toFixed(3)}(f(e),l)),r&&(b.style.transform=function(t,n){var e=t.translate,r=t.translateX,o=t.translateY,i=t.scale,a=t.rotate,c="";if(e){var l=x.apply(void 0,f(e[0]).concat([n])),s=x.apply(void 0,f(e[1]).concat([n]));c+="translate(".concat(l,"px, ").concat(s,"px) ")}else r?c+="translateX(".concat(x.apply(void 0,f(r).concat([n])),"px) "):o&&(c+="translateY(".concat(x.apply(void 0,f(o).concat([n])),"px) "));return i&&(c+="scale(".concat(x.apply(void 0,f(i).concat([n])),") ")),a&&(c+="rotate(".concat(x.apply(void 0,f(a).concat([n])),"deg) ")),c}(c({},r),l)),o&&(b.style.backgroundColor=function(t,n){var e=k.apply(void 0,f(t).concat([n]));return"rgba(".concat(e.join(","),") ")}(f(o),l)),i&&(b.style.background=function(t,n){var e=t.type,r=t.dir,o=t.start,i=t.end;if(o.length<2||i.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(o.length!==i.length)throw new Error("'start' and 'end' array length must be the same");for(var a=[],c=0;c<o.length;c++){var l=k(o[c],i[c],n);a.push("rgba(".concat(l.join(","),")"))}var s=r&&"radial"!==e?x.apply(void 0,f(r).concat([n]))+"deg,":"";return"".concat(e&&e||"linear","-gradient(").concat(s).concat(a.join(","),")")}(c({},i),l)),a&&(b.style.filter=function(t,n){var e=t.blur,r=t.brightness,o=t.contrast,i=t.dropShadow,a=t.grayscale,c=t.hueRotate,l=t.opacity,s=t.saturate,u=t.sepia,d="";return e&&(d+="blur(".concat(x.apply(void 0,f(e).concat([n])),"px) ")),r&&(d+="brightness(".concat(x.apply(void 0,f(r).concat([n])),"%) ")),o&&(d+="contrast(".concat(x.apply(void 0,f(o).concat([n])),"%) ")),a&&(d+="grayscale(".concat(x.apply(void 0,f(a).concat([n])),"%) ")),c&&(d+="hue-rotate(".concat(x.apply(void 0,f(c).concat([n])),"deg) ")),l&&(d+="opacity(".concat(x.apply(void 0,f(l).concat([n])),"%) ")),s&&(d+="saturate(".concat(x.apply(void 0,f(s).concat([n])),"%) ")),u&&(d+="sepia(".concat(x.apply(void 0,f(u).concat([n])),"%) ")),i&&(d+="drop-shadow(".concat(x.apply(void 0,f(i).concat([n])),"px) ")),d}(c({},a),l))}function z(){var t=i.length,n=i.offset,e=s(i,A),r=B(I(t,b.offsetHeight),n),o=r.start,a=r.end,l=r.current/a/a,u=l<0?0:l>1?1:l;u>0&&u<1&&N(c({},e),{start:o,end:a,current:u})}function Y(){var t=a.length,n=a.offset,e=s(a,P),r=B(I(t,b.offsetHeight),n),o=r.start,i=r.end,l=r.current/i/i-(1-i)/i,u=l<0?0:l>1?1:l;u>0&&u<1&&N(c({},e),{start:1-i,end:1-o,current:u})}function q(){l.forEach((function(t){console.log(t)}))}function B(t,n){var e=(n||0)/R.scrollHeight,r=t/R.scrollHeight+e;return{start:e,end:r,current:e+r*j}}o((function(){return!p&&b&&function(){var t=H(b.offsetTop,b.offsetTop+R.endScroll,R.startScroll+E,d,(function(t){var n=t.isTransitioning;C(c(c({},$),{},{isTransitioning:n}))}));T(t)}(),function(){}}),[E]),o((function(){$.isTransitioning&&(i&&requestAnimationFrame(z),a&&requestAnimationFrame(Y),l&&requestAnimationFrame(q))}),[j,$.isTransitioning,i,a,l]),o((function(){console.info("Transitioning changed to: ",$.isTransitioning),g&&g()}),[$.isTransitioning,g]),o((function(){return C(c(c({},$),{},{inView:m}))}),[m]);var D=function(){if(b){var t=null==r?void 0:r.toString(),n=t?t.includes("%")?I(t)*b.offsetHeight:parseInt(t):b.offsetHeight;H(b.offsetTop,n,R.startScroll+E,d,(function(t){var e=t.isTransitioning,r=t.scrollHeight;C(c(c({},$),{},{isTransitioning:e})),M(c(c({},R),{},{endScroll:n,scrollHeight:r}))})),b.style.background=function(t){if("string"==typeof t){if(0===t.length)return"";if(4===t.length?t+="f":7===t.length&&(t+="ff"),!/^#[0-9a-fA-F]{8}$/i.test(t)&&!/^#[0-9a-fA-F]{4}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "))}return t}(i&&i.background&&i.background[0]||a&&a.background&&a.background[0]||"")}};return o((function(){return D()}),[b]),o((function(){}),[]),{ref:v,status:$}},$=function(t){var r=t.startScroll,i=t.endScroll,a=t.speed,l=t.opacity,s=t.transform,d=t.offset,p=t.background,g=t.gradient,h=t.filter,v=t.disabled,m=t.className,y=t.children,b=w({}),E=b.ref,O=b.inView,j=b.entry,T=null==j?void 0:j.target,H=S(1),I=u(e(0),2),A=I[0],P=I[1],V={isTransitioning:!1},$=function(t){switch(t){case"top":return document.documentElement.scrollTop;case"center":return+document.documentElement.scrollTop+document.documentElement.clientHeight/2;case"bottom":return+document.documentElement.scrollTop+document.documentElement.clientHeight;default:return t||+document.documentElement.scrollTop+document.documentElement.clientHeight}},C=u(e({startScroll:$(r||"top"),endScroll:i?i.toString().includes("%")?1e3:parseInt(i.toString()):300,speed:(a||20)/100}),2),F=C[0],R=C[1],M=function(){if(T){var t=T.offsetParent.offsetTop+(d||0),n=t+F.endScroll,e=n-t,o=F.startScroll+H,i=o-t,a=i/e,c=a<0?0:a>1?1:a;V.isTransitioning=!!(c>0&&c<1),console.info("Progress!\n","start: ".concat(t,"\n"),"end: ".concat(n,"\n"),"scrollHeight: ".concat(e,"\n"),"config startScroll: ".concat(F.startScroll,"\n"),"manual startScroll: ".concat(H+window.innerHeight,"\n"),"automated startScroll: ".concat($(r||"top"),"\n"),"current: ".concat(o,"\n"),"diff: ".concat(i,"\n"),"progress: ".concat(a,"\n"),"result: ".concat(c,"\n"),"isTransitioning: ".concat(V.isTransitioning)),P(c)}},N=function(){if(T){if(l){var t=x.apply(void 0,f(l).concat([A]));T.style.opacity=t.toFixed(3)}if(p){var n=k.apply(void 0,f(p).concat([A]));T.style.backgroundColor="rgba(".concat(n.join(","),") ")}else if(g){var e=g.type,r=g.dir,o=g.start,i=g.end;if(o.length<2||i.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(o.length!==i.length)throw new Error("'start' and 'end' array length must be the same");for(var a=[],c=0;c<o.length;c++){var u=k(o[c],i[c],A);a.push("rgba(".concat(u.join(","),")"))}var d=r&&"radial"!==e?x.apply(void 0,f(r).concat([A]))+"deg,":"";console.log(e,r,o,i),console.log("".concat(e&&e||"linear","-gradient(").concat(d).concat(a.join(","),")")),T.style.background="".concat(e&&e||"linear","-gradient(").concat(d).concat(a.join(","),")")}var v="";if(s){var m=s.translate,y=s.translateX,b=s.translateY,w=s.scale,S=s.rotate;if(m){var E=x.apply(void 0,f(m[0]).concat([A])),O=x.apply(void 0,f(m[1]).concat([A]));v+="translate(".concat(E,"px, ").concat(O,"px) ")}else y?v+="translateX(".concat(x.apply(void 0,f(y).concat([A])),"px) "):b&&(v+="translateY(".concat(x.apply(void 0,f(b).concat([A])),"px) "));w&&(v+="scale(".concat(x.apply(void 0,f(w).concat([A])),") ")),S&&(v+="rotate(".concat(x.apply(void 0,f(S).concat([A])),"deg) ")),""!==v&&(T.style.transform=v)}if(h){var j=x.apply(void 0,f(h.blur||[0,0]).concat([A]));T.style.filter="blur(".concat(j,"px) ")}}};o((function(){if(!v)return M(),function(){}}),[H]),o((function(){requestAnimationFrame(N)}),[A]);var z=function(){R(c(c({},F),{},{startScroll:$(r||"top")}))};return o((function(){return function(){if(T){console.log(O);var t=null==i?void 0:i.toString(),n=t?t.includes("%")?parseInt(t)/100*T.offsetHeight:parseInt(t):T.offsetParent.offsetHeight;R(c(c({},F),{},{endScroll:n})),M(),N()}}(),function(){}}),[T]),o((function(){return P(0),window.addEventListener("resize",z),function(){return window.removeEventListener("resize",z)}}),[]),n.createElement("div",{style:{position:"relative",width:"100%",height:"fit-content"}},n.createElement("div",{ref:E,style:{position:"relative",width:"100%",height:"fit-content",willChange:"transform, opacity, background"},className:m},y&&"function"==typeof y?y({isTransitioning:A>0&&A<1,inView:O}):y))},C=["children","className"],F=i.div(E||(O=["\n  width: 100%;\n  height: fit-content;\n"],j||(j=O.slice(0)),E=Object.freeze(Object.defineProperties(O,{raw:{value:Object.freeze(j)}})))),R=function(t){var e=t.children,r=t.className,o=s(t,C),i=V(c({},o)),a=i.ref,l=i.status;return n.createElement(F,{ref:a,className:r},e&&"function"==typeof e?e(l):e)};export{$ as Parallax,R as UseParallax,T as getRGBA,V as useParallax};
//# sourceMappingURL=indes.js.map
