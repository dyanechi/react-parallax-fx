!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("styled-components")):"function"==typeof define&&define.amd?define(["exports","react","styled-components"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["react-parallax-pro"]={},t.React,t.styled)}(this,(function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var i=o(e),c=r(e),a=r(n);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],c=!0,a=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);c=!0);}catch(t){a=!0,o=t}finally{try{c||null==n.return||n.return()}finally{if(a)throw o}}return i}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const h=new Map,v=new WeakMap;let b,m=0;function w(t){return Object.keys(t).sort().filter((e=>void 0!==t[e])).map((e=>{return`${e}_${"root"===e?(n=t.root,n?(v.has(n)||(m+=1,v.set(n,m.toString())),v.get(n)):"0"):t[e]}`;var n})).toString()}function O(t,e,n={},r=b){if(void 0===window.IntersectionObserver&&void 0!==r){const o=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:o,observer:i,elements:c}=function(t){let e=w(t),n=h.get(e);if(!n){const r=new Map;let o;const i=new IntersectionObserver((e=>{e.forEach((e=>{var n;const i=e.isIntersecting&&o.some((t=>e.intersectionRatio>=t));t.trackVisibility&&void 0===e.isVisible&&(e.isVisible=i),null==(n=r.get(e.target))||n.forEach((t=>{t(i,e)}))}))}),t);o=i.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:i,elements:r},h.set(e,n)}return n}(n);let a=c.get(t)||[];return c.has(t)||c.set(t,a),a.push(e),i.observe(t),function(){a.splice(a.indexOf(e),1),0===a.length&&(c.delete(t),i.unobserve(t)),0===c.size&&(i.disconnect(),h.delete(o))}}var S=function(t){var e=[];if("string"==typeof t){if(4===t.length?t+="f":7===t.length&&(t+="ff"),/^#[0-9a-fA-F]{8}$/i.test(t))t.replace("#","").split(/(..)/g).filter((function(t){return t})).forEach((function(t){return e.push(Number("0x"+t))})),e[e.length-1]=e[e.length-1]/255;else{if(!/^#[0-9a-fA-F]{4}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "));t.replace("#","").split(/(.)/g).filter((function(t){return t})).forEach((function(t){return e.push(17*Number("0x"+t))})),e[e.length-1]=e[e.length-1]/255}return e}return t},j=function(t,e,n,r){if(t===e)return t;var o=t<e?e*n+(t-t*n):t-t*n+e*n;return r?r(o):o},E=function(t,e,n){var r=S(t),o=S(e);return r.map((function(t,e){return j(t,o[e],n)}))};var A,x,T,k=function(t,e,n,r,o){var i=t+(r||0),c=i+e-i;if(c<=0)throw new Error("'scrollHeight' must be greater than zero");var a=(n-i)/c,s=a<0?0:a>1?1:a;return o&&o({isTransitioning:!!(s>0&&s<1),result:s,scrollHeight:c}),s},I=function(t,e){if("number"==typeof t)return t;if("string"==typeof t){if(/[0-9]%$/g.test(t.toString()))return e?e*(parseInt(t)/100):parseInt(t)/100;if(/[0-9](px)$/g.test(t.toString()))return console.log("".concat(t," is in pixels!")),parseInt(t);if(/[0-9](em)$/g.test(t.toString()))return console.log("".concat(t," is in em!")),16*parseInt(t);if(/^[0-9](vh)$/g.test(t.toString()))return console.log("".concat(t," is in vh!")),parseInt(t)/100*window.innerHeight;if(/^[0-9](vw)$/g.test(t.toString()))return console.log("".concat(t," is in vw!")),parseInt(t)/100*window.innerWidth}return console.warn("Couldn't find any match for",t),0},H=["length","offset"],P=["length","offset"],V=function(t){var n=t.startScroll,r=t.endScroll,o=t.fadeIn,c=t.fadeOut,a=t.keyframes,s=t.offset,u=t.disabled,g=t.callback,y=function({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:o,triggerOnce:c,skip:a,initialInView:s,fallbackInView:l,onChange:u}={}){const f=i.useRef(),d=i.useRef(),[p,g]=i.useState({inView:!!s});d.current=u;const y=i.useCallback((i=>{void 0!==f.current&&(f.current(),f.current=void 0),a||i&&(f.current=O(i,((t,e)=>{g({inView:t,entry:e}),d.current&&d.current(t,e),e.isIntersecting&&c&&f.current&&(f.current(),f.current=void 0)}),{root:o,rootMargin:r,threshold:t,trackVisibility:n,delay:e},l))}),[Array.isArray(t)?t.toString():t,o,r,c,a,n,l,e]);i.useEffect((()=>{f.current||!p.entry||c||a||g({inView:!!s})}));const h=[y,p.inView,p.entry];return h.ref=h[0],h.inView=h[1],h.entry=h[2],h}(),h=y.ref,v=y.inView,b=y.entry,m=null==b?void 0:b.target,w=function(t){var n=d(e.useState(0),2),r=n[0],o=n[1];return e.useLayoutEffect((function(){function e(){o(Math.floor(window.pageYOffset/t)*t)}return window.addEventListener("scroll",e),e(),function(){return window.removeEventListener("scroll",e)}}),[]),r}(1),S=d(e.useState(0),2),A=S[0],x=S[1],T=d(e.useState({isTransitioning:!1,inView:v}),2),V=T[0],R=T[1],$=d(e.useState({startScroll:function(t){switch(t){case"top":return document.documentElement.scrollTop;case"center":return+document.documentElement.scrollTop+document.documentElement.clientHeight/2;case"bottom":return+document.documentElement.scrollTop+document.documentElement.clientHeight;default:return t||+document.documentElement.scrollTop+document.documentElement.clientHeight}}(n||"bottom"),endScroll:r?I(r):300,scrollHeight:0}),2),C=$[0],F=$[1];function M(t,e){var n=t.opacity,r=t.transform,o=t.background,i=t.gradient,c=t.filter,a=e.current;n&&(m.style.opacity=function(t,e){return j.apply(void 0,p(t).concat([e])).toFixed(3)}(p(n),a)),r&&(m.style.transform=function(t,e){var n=t.translate,r=t.translateX,o=t.translateY,i=t.scale,c=t.rotate,a="";if(n){var s=j.apply(void 0,p(n[0]).concat([e])),l=j.apply(void 0,p(n[1]).concat([e]));a+="translate(".concat(s,"px, ").concat(l,"px) ")}else r?a+="translateX(".concat(j.apply(void 0,p(r).concat([e])),"px) "):o&&(a+="translateY(".concat(j.apply(void 0,p(o).concat([e])),"px) "));return i&&(a+="scale(".concat(j.apply(void 0,p(i).concat([e])),") ")),c&&(a+="rotate(".concat(j.apply(void 0,p(c).concat([e])),"deg) ")),a}(l({},r),a)),o&&(m.style.backgroundColor=function(t,e){var n=E.apply(void 0,p(t).concat([e]));return"rgba(".concat(n.join(","),") ")}(p(o),a)),i&&(m.style.background=function(t,e){var n=t.type,r=t.dir,o=t.start,i=t.end;if(o.length<2||i.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(o.length!==i.length)throw new Error("'start' and 'end' array length must be the same");for(var c=[],a=0;a<o.length;a++){var s=E(o[a],i[a],e);c.push("rgba(".concat(s.join(","),")"))}var l=r&&"radial"!==n?j.apply(void 0,p(r).concat([e]))+"deg,":"";return"".concat(n&&n||"linear","-gradient(").concat(l).concat(c.join(","),")")}(l({},i),a)),c&&(m.style.filter=function(t,e){var n=t.blur,r=t.brightness,o=t.contrast,i=t.dropShadow,c=t.grayscale,a=t.hueRotate,s=t.opacity,l=t.saturate,u=t.sepia,f="";return n&&(f+="blur(".concat(j.apply(void 0,p(n).concat([e])),"px) ")),r&&(f+="brightness(".concat(j.apply(void 0,p(r).concat([e])),"%) ")),o&&(f+="contrast(".concat(j.apply(void 0,p(o).concat([e])),"%) ")),c&&(f+="grayscale(".concat(j.apply(void 0,p(c).concat([e])),"%) ")),a&&(f+="hue-rotate(".concat(j.apply(void 0,p(a).concat([e])),"deg) ")),s&&(f+="opacity(".concat(j.apply(void 0,p(s).concat([e])),"%) ")),l&&(f+="saturate(".concat(j.apply(void 0,p(l).concat([e])),"%) ")),u&&(f+="sepia(".concat(j.apply(void 0,p(u).concat([e])),"%) ")),i&&(f+="drop-shadow(".concat(j.apply(void 0,p(i).concat([e])),"px) ")),f}(l({},c),a))}function q(){var t=o.length,e=o.offset,n=f(o,H),r=D(I(t,m.offsetHeight),e),i=r.start,c=r.end,a=r.current/c/c,s=a<0?0:a>1?1:a;s>0&&s<1&&M(l({},n),{start:i,end:c,current:s})}function z(){var t=c.length,e=c.offset,n=f(c,P),r=D(I(t,m.offsetHeight),e),o=r.start,i=r.end,a=r.current/i/i-(1-i)/i,s=a<0?0:a>1?1:a;s>0&&s<1&&M(l({},n),{start:1-i,end:1-o,current:s})}function B(){a.forEach((function(t){console.log(t)}))}function D(t,e){var n=(e||0)/C.scrollHeight,r=t/C.scrollHeight+n;return{start:n,end:r,current:n+r*A}}e.useEffect((function(){return!u&&m&&function(){var t=k(m.offsetTop,m.offsetTop+C.endScroll,C.startScroll+w,s,(function(t){var e=t.isTransitioning;R(l(l({},V),{},{isTransitioning:e}))}));x(t)}(),function(){}}),[w]),e.useEffect((function(){V.isTransitioning&&(o&&requestAnimationFrame(q),c&&requestAnimationFrame(z),a&&requestAnimationFrame(B))}),[A,V.isTransitioning,o,c,a]),e.useEffect((function(){console.info("Transitioning changed to: ",V.isTransitioning),g&&g()}),[V.isTransitioning,g]),e.useEffect((function(){return R(l(l({},V),{},{inView:v}))}),[v]);var N=function(){if(m){var t=null==r?void 0:r.toString(),e=t?t.includes("%")?I(t)*m.offsetHeight:parseInt(t):m.offsetHeight;k(m.offsetTop,e,C.startScroll+w,s,(function(t){var n=t.isTransitioning,r=t.scrollHeight;R(l(l({},V),{},{isTransitioning:n})),F(l(l({},C),{},{endScroll:e,scrollHeight:r}))})),m.style.background=function(t){if("string"==typeof t){if(0===t.length)return"";if(4===t.length?t+="f":7===t.length&&(t+="ff"),!/^#[0-9a-fA-F]{8}$/i.test(t)&&!/^#[0-9a-fA-F]{4}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "))}return t}(o&&o.background&&o.background[0]||c&&c.background&&c.background[0]||"")}};return e.useEffect((function(){return N()}),[m]),e.useEffect((function(){}),[]),{ref:h,status:V}},R=["children","className"],$=a.default.div(A||(x=["\n  width: 100%;\n  height: fit-content;\n"],T||(T=x.slice(0)),A=Object.freeze(Object.defineProperties(x,{raw:{value:Object.freeze(T)}})))),C=function(t){var e=t.children,n=t.className,r=f(t,R),o=V(l({},r)),i=o.ref,a=o.status;return c.default.createElement($,{ref:i,className:n},e&&"function"==typeof e?e(a):e)};t.Parallax=C,t.getRGBA=S}));
