!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("styled-components")):"function"==typeof define&&define.amd?define(["exports","react","styled-components"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["react-parallax-pro"]={},t.React,t.styled)}(this,(function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var a=o(e),i=r(e),c=r(n);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const v=new Map,y=new WeakMap;let m,b=0;function w(t){return Object.keys(t).sort().filter((e=>void 0!==t[e])).map((e=>{return`${e}_${"root"===e?(n=t.root,n?(y.has(n)||(b+=1,y.set(n,b.toString())),y.get(n)):"0"):t[e]}`;var n})).toString()}function S(t,e,n={},r=m){if(void 0===window.IntersectionObserver&&void 0!==r){const o=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:o,observer:a,elements:i}=function(t){let e=w(t),n=v.get(e);if(!n){const r=new Map;let o;const a=new IntersectionObserver((e=>{e.forEach((e=>{var n;const a=e.isIntersecting&&o.some((t=>e.intersectionRatio>=t));t.trackVisibility&&void 0===e.isVisible&&(e.isVisible=a),null==(n=r.get(e.target))||n.forEach((t=>{t(a,e)}))}))}),t);o=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:a,elements:r},v.set(e,n)}return n}(n);let c=i.get(t)||[];return i.has(t)||i.set(t,c),c.push(e),a.observe(t),function(){c.splice(c.indexOf(e),1),0===c.length&&(i.delete(t),a.unobserve(t)),0===i.size&&(a.disconnect(),v.delete(o))}}function O({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:o,triggerOnce:i,skip:c,initialInView:l,fallbackInView:s,onChange:u}={}){const f=a.useRef(),d=a.useRef(),[g,p]=a.useState({inView:!!l});d.current=u;const h=a.useCallback((a=>{void 0!==f.current&&(f.current(),f.current=void 0),c||a&&(f.current=S(a,((t,e)=>{p({inView:t,entry:e}),d.current&&d.current(t,e),e.isIntersecting&&i&&f.current&&(f.current(),f.current=void 0)}),{root:o,rootMargin:r,threshold:t,trackVisibility:n,delay:e},s))}),[Array.isArray(t)?t.toString():t,o,r,i,c,n,s,e]);a.useEffect((()=>{f.current||!g.entry||i||c||p({inView:!!l})}));const v=[h,g.inView,g.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}function E(t){var n=d(e.useState(0),2),r=n[0],o=n[1];return e.useLayoutEffect((function(){function e(){o(Math.floor(window.pageYOffset/t)*t)}return window.addEventListener("scroll",e),e(),function(){return window.removeEventListener("scroll",e)}}),[]),r}var j,F,A,x=function(t,e){if("number"==typeof t)return t;if("string"==typeof t){if(/[0-9]%$/g.test(t.toString()))return e?e*(parseInt(t)/100):parseInt(t)/100;if(/[0-9](px)$/g.test(t.toString()))return console.log("".concat(t," is in pixels!")),parseInt(t);if(/[0-9](em)$/g.test(t.toString()))return console.log("".concat(t," is in em!")),16*parseInt(t);if(/^[0-9](vh)$/g.test(t.toString()))return console.log("".concat(t," is in vh!")),parseInt(t)/100*window.innerHeight;if(/^[0-9](vw)$/g.test(t.toString()))return console.log("".concat(t," is in vw!")),parseInt(t)/100*window.innerWidth}return console.warn("Couldn't find any match for",t),0},I={TRANSFORM:["translate","translateX","translateY","scale","rotate"],FILTERS:["blur","brightness","contrast","grayscale","hueRotate","saturate","sepia","dropShadow"]},k=function(t){var e=[];if("string"==typeof t){if(/^#[0-9a-fA-F]{3}$/i.test(t)?t+="f":/^#[0-9a-fA-F]{6}$/i.test(t)&&(t+="ff"),/^#[0-9a-fA-F]{4}$/i.test(t))t.replace("#","").split(/(.)/g).filter((function(t){return t})).forEach((function(t){return e.push(17*Number("0x"+t))})),e[e.length-1]=e[e.length-1]/255;else{if(!/^#[0-9a-fA-F]{8}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "));t.replace("#","").split(/(..)/g).filter((function(t){return t})).forEach((function(t){return e.push(Number("0x"+t))})),e[e.length-1]=e[e.length-1]/255}return e}return t},P=function(t,e,n,r){if(t===e)return t;var o=t<e?e*n+(t-t*n):t-t*n+e*n;return r?r(o):o},T=function(t,e,n){var r=k(t),o=k(e);return r.map((function(t,e){return P(t,o[e],n)}))},z=function(t,e){var n={transform:{},filter:{}};return Object.entries(t).forEach((function(r){var o,a,i=d(r,1)[0],c={};"gradient"===i?c.gradient={type:t.gradient.type,dir:[t.gradient.dir||0,(null===(o=e.gradient)||void 0===o?void 0:o.dir)||t.gradient.dir],start:t.gradient.colors,end:(null===(a=e.gradient)||void 0===a?void 0:a.colors)||t.gradient.colors}:I.FILTERS.includes(i)?c.filter=s(s({},n.filter),{},u({},i,[t[i]||0,e[i]||t[i]])):I.TRANSFORM.includes(i)?c.transform=s(s({},n.transform),{},u({},i,[t[i]||0,e&&e[i]||0])):c=u({},i,[t[i],e[i]]);n=s(s({},n),c)})),console.log("Merged",n),n},H=function(t){if(t){var e={start:0,length:0},n={start:0,length:0};return Object.keys(t).forEach((function(r){if("gradient"===r){var o=t.gradient;e.gradient={type:o.type,dir:o.dir[0],colors:o.start},n.gradient={type:o.type,dir:o.dir[1],colors:o.end}}else if("translate"===r)e.translate=t.translate[0],n.translate=t.translate[1];else if("length"===r)e.length=x(t.length[0]),n.length=x(t.length[1]);else{var a=t[r];e[r]=a[0],n[r]=a[1]}})),console.info("Converted frames: ",[e,n]),[e,n]}},R=function(){var t=d(e.useState({totalLength:0,frames:new Array,currentFrame:0,extend:!1,isInitialized:!1,easing:.1,onChange:function(){}}),2),n=t[0],r=t[1];return e.useLayoutEffect((function(){console.info("frames updated")}),[n.frames]),{get:n,init:function(t,e){if(n.isInitialized)console.warn("useKeyframes 'config' is already initialized.");else{var o=new Array,a=0,i={};t.forEach((function(e,n){var r=n>=t.length-1?t[t.length-1]:t[n+1];Object.assign(i,e.hold?{}:r,e),o.push(s(s({},i),{},{start:a+e.start})),a+=e.length})),console.log(o),r(s(s({},n),{},{frames:o,totalLength:a,isInitialized:!0})),e&&e(a),console.log("'useKeyframe': initialized")}},getLength:function(){return n.totalLength},getFrames:function(){return n.frames},getCurrentFrame:function(t){var e=function(t){var e=n.frames,o=t*n.totalLength;if(o>e[e.length-1].start)return r(s(s({},n),{},{currentFrame:e.length-1})),e.length-1;if(o<e[0].length)return r(s(s({},n),{},{currentFrame:0})),0;if(o>e[n.currentFrame].start&&o<e[n.currentFrame].length)return n.currentFrame;var a=0,i=0,c=e.length-1,l=Math.floor((c+i)/2),u=!1;for(;!u&&i<=c&&a<10;){a++;var f=e[l],d=f.start,g=d+f.length;if(o<d?c=l-1:o>g&&(i=l+1),u=d<o&&o<g)return r(s(s({},n),{},{currentFrame:l})),l;l=Math.floor((c+i)/2)}return n.currentFrame}(t),o=e>=n.frames.length-2?n.frames.length-1:e+1,a=n.frames[e],i=n.frames[o],c=a.start/n.totalLength,l=c+a.length/n.totalLength;return{curFrame:a,nextFrame:i,curProgress:1/(l-c)*t-l/(l-c)+1}},getAllFrames:function(){return n.frames},isInitialized:n.isInitialized}},C=function(t){var n,r,o=t.startScroll,a=t.endScroll,i=t.fadeIn,c=t.fadeOut,l=t.keyframes,u=t.offset,f=t.disabled,p=t.extend,h=t.ease,v=t.onTransitionChange,y=O(),m=y.ref,b=y.inView,w=y.entry,S=null==w?void 0:w.target,j=E(1),F=d(e.useState({startScroll:(n=o||"bottom",r=document.documentElement.clientHeight,"top"===n?j:"center"===n?j+r/2:"bottom"===n?j+r:u||j+r),endScroll:a?x(a):300,scrollHeight:0}),2),A=F[0],I=F[1],k=R(),C=function(t,n,r,o,a){var i=d(e.useState({current:0,previous:0,rounded:0,ease:Math.max(0,Math.min(1,null!=a?a:1))}),2),c=i[0],l=i[1],u=d(e.useState({start:0,end:0,scrollHeight:0}),2),f=u[0],g=u[1],p=d(e.useState({progress:0,isTransitioning:!1}),2),h=p[0],v=p[1],y=e.useCallback((function(){l(s(s({},c),{},{current:r,previous:c.previous+(c.current-c.previous)*c.ease,rounded:Math.round(c.previous)}));var t=(c.rounded-f.start)/f.scrollHeight;v(s(s({},h),{},{progress:t<0?0:t>1?1:t,isTransitioning:!!(t>0&&t<1)}))}),[r,c.rounded]);return e.useEffect((function(){requestAnimationFrame(y)}),[y]),e.useEffect((function(){var e=t+(o||0),r=e+n,a=r-e;g(s(s({},f),{},{start:e,end:r,scrollHeight:a}))}),[t,n,o]),s(s({},h),{},{scrollHeight:f.scrollHeight})}(S&&S.offsetTop||0,A.endScroll,A.startScroll+j,u,h),L=C.progress,M=C.isTransitioning;var V=function(){var t,e;S&&(S.style.background=function(t){if("string"==typeof t){if(0===t.length)return"";if(4===t.length?t+="f":7===t.length&&(t+="ff"),!/^#[0-9a-fA-F]{8}$/i.test(t)&&!/^#[0-9a-fA-F]{4}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "))}return t}((null==i||null===(t=i.background)||void 0===t?void 0:t[0])||(null==i||null===(e=i.background)||void 0===e?void 0:e[0])||""),(l||i||c)&&requestAnimationFrame(Y))};function $(t,e){var n=t.opacity,r=t.transform,o=t.background,a=t.gradient,i=t.filter,c=e;n&&(S.style.opacity=function(t,e){return P.apply(void 0,g(t).concat([e])).toFixed(3)}(g(n),c)).toString(),r&&(S.style.transform=function(t,e){var n=t.translate,r=t.translateX,o=t.translateY,a=t.scale,i=t.rotate,c="";if(n){var l=P.apply(void 0,g(n[0]).concat([e])),s=P.apply(void 0,g(n[1]).concat([e]));c+="translate(".concat(l,"px, ").concat(s,"px) ")}else r?c+="translateX(".concat(P.apply(void 0,g(r).concat([e])),"px) "):o&&(c+="translateY(".concat(P.apply(void 0,g(o).concat([e])),"px) "));return a&&(c+="scale(".concat(P.apply(void 0,g(a).concat([e])),") ")),i&&(c+="rotate(".concat(P.apply(void 0,g(i).concat([e])),"deg) ")),c}(s({},r),c)),o&&(S.style.backgroundColor=function(t,e){var n=T.apply(void 0,g(t).concat([e]));return"rgba(".concat(n.join(","),") ")}(g(o),c)),a&&(S.style.background=function(t,e){var n=t.type,r=t.dir,o=t.start,a=t.end;if(o.length<2||a.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(o.length!==a.length)throw new Error("'start' and 'end' array length must be the same");for(var i=[],c=0;c<o.length;c++){var l=T(o[c],a[c],e);i.push("rgba(".concat(l.join(","),")"))}var s=r&&"radial"!==n?P.apply(void 0,g(r).concat([e]))+"deg,":"";return"".concat(n&&n||"linear","-gradient(").concat(s).concat(i.join(","),")")}(s({},a),c)),i&&(S.style.filter=function(t,e){var n=t.blur,r=t.brightness,o=t.contrast,a=t.dropShadow,i=t.grayscale,c=t.hueRotate,l=t.opacity,s=t.saturate,u=t.sepia,f="";return n&&(f+="blur(".concat(P.apply(void 0,g(n).concat([e])),"px) ")),r&&(f+="brightness(".concat(P.apply(void 0,g(r).concat([e])),"%) ")),o&&(f+="contrast(".concat(P.apply(void 0,g(o).concat([e])),"%) ")),i&&(f+="grayscale(".concat(P.apply(void 0,g(i).concat([e])),"%) ")),c&&(f+="hue-rotate(".concat(P.apply(void 0,g(c).concat([e])),"deg) ")),l&&(f+="opacity(".concat(P.apply(void 0,g(l).concat([e])),"%) ")),s&&(f+="saturate(".concat(P.apply(void 0,g(s).concat([e])),"%) ")),u&&(f+="sepia(".concat(P.apply(void 0,g(u).concat([e])),"%) ")),a&&(f+="drop-shadow(".concat(P.apply(void 0,g(a).concat([e])),"px) ")),f}(s({},i),c))}function q(){if(k.isInitialized){var t=k.getCurrentFrame(L),e=t.curFrame,n=t.nextFrame,r=z(e,n);(isNaN(L)||L<=0)&&requestAnimationFrame((function(){return $(r,0)})),L>=1&&requestAnimationFrame((function(){return $(r,1)}))}}function N(){if(!k.isInitialized){var t=new Array;Object.assign(t,l||function(){var t=new Array,e=H(i),n=H(c),r=Math.max(A.endScroll,S.offsetHeight,x((null==i?void 0:i.length)||0)+x((null==c?void 0:c.length)||0));if(e){var o=x(i.length,r);e[0].length=o,e[1].start=o,Object.assign(t,e)}if(n){var a=x(c.length,r);n[0]=s(s({},n[0]),{},{start:r-a,length:a}),n[1].start=r,e?e[1]=s(s({},e[1]),{},{length:r-a}):n=[{start:0,length:r-a}].concat(g(n)),t=[].concat(g(t),g(n))}return t}());var e=t.map((function(t){return s(s({},t),{},{start:0,length:x(t.length,S.offsetHeight)})}));k.init(e,(function(t){p&&t>A.scrollHeight&&I(s(s({},A),{},{scrollHeight:t,endScroll:t})),requestAnimationFrame(q)}))}}function Y(){if(!k.isInitialized)return N();var t=k.getCurrentFrame(L),e=t.curFrame,n=t.nextFrame,r=t.curProgress,o=z(e,n);requestAnimationFrame((function(){return $(o,r)}))}return e.useLayoutEffect((function(){!f&&M&&k.isInitialized&&requestAnimationFrame(Y),console.log(L)}),[L,M,k.isInitialized,f]),e.useLayoutEffect((function(){console.info("Transitioning changed to: ",M),S&&requestAnimationFrame(q),v&&v()}),[M,v,S,k.isInitialized]),e.useEffect((function(){return V()}),[S]),e.useEffect((function(){}),[]),{ref:m,status:{isTransitioning:M,inView:b}}},L=function(t){var n=t.startScroll,r=t.endScroll,o=t.speed,a=t.opacity,c=t.transform,l=t.offset,u=t.background,f=t.gradient,p=t.filter,h=t.disabled,v=t.className,y=t.children,m=O({}),b=m.ref,w=m.inView,S=m.entry,j=null==S?void 0:S.target,F=E(1),A=d(e.useState(0),2),x=A[0],I=A[1],k=function(t){switch(t){case"top":return document.documentElement.scrollTop;case"center":return+document.documentElement.scrollTop+document.documentElement.clientHeight/2;case"bottom":return+document.documentElement.scrollTop+document.documentElement.clientHeight;default:return t||+document.documentElement.scrollTop+document.documentElement.clientHeight}},z=d(e.useState({startScroll:k(n||"top"),endScroll:r?r.toString().includes("%")?1e3:parseInt(r.toString()):300,speed:(o||20)/100}),2),H=z[0],R=z[1],C=function(){if(j){var t=j.offsetParent.offsetTop+(l||0),e=t+H.endScroll-t,n=(H.startScroll+F-t)/e;I(n<0?0:n>1?1:n)}},L=function(){if(j){if(a){var t=P.apply(void 0,g(a).concat([x]));j.style.opacity=t.toFixed(3)}if(u){var e=T.apply(void 0,g(u).concat([x]));j.style.backgroundColor="rgba(".concat(e.join(","),") ")}else if(f){var n=f.type,r=f.dir,o=f.start,i=f.end;if(o.length<2||i.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(o.length!==i.length)throw new Error("'start' and 'end' array length must be the same");for(var l=[],s=0;s<o.length;s++){var d=T(o[s],i[s],x);l.push("rgba(".concat(d.join(","),")"))}var h=r&&"radial"!==n?P.apply(void 0,g(r).concat([x]))+"deg,":"";console.log(n,r,o,i),console.log("".concat(n&&n||"linear","-gradient(").concat(h).concat(l.join(" "),")")),j.style.background="".concat(n&&n||"linear","-gradient(").concat(h).concat(l.join(","),")")}var v="";if(c){var y=c.translate,m=c.translateX,b=c.translateY,w=c.scale,S=c.rotate;if(y){var O=P.apply(void 0,g(y[0]).concat([x])),E=P.apply(void 0,g(y[1]).concat([x]));v+="translate(".concat(O,"px, ").concat(E,"px) ")}else m?v+="translateX(".concat(P.apply(void 0,g(m).concat([x])),"px) "):b&&(v+="translateY(".concat(P.apply(void 0,g(b).concat([x])),"px) "));w&&(v+="scale(".concat(P.apply(void 0,g(w).concat([x])),") ")),S&&(v+="rotate(".concat(P.apply(void 0,g(S).concat([x])),"deg) ")),""!==v&&(j.style.transform=v)}if(p){var F=P.apply(void 0,g(p.blur||[0,0]).concat([x]));j.style.filter="blur(".concat(F,"px) ")}}};e.useEffect((function(){if(!h)return C(),function(){}}),[F]),e.useEffect((function(){requestAnimationFrame(L)}),[x]);var M=function(){R(s(s({},H),{},{startScroll:k(n||"top")}))};return e.useEffect((function(){return function(){if(j){console.log(w);var t=null==r?void 0:r.toString(),e=t?t.includes("%")?parseInt(t)/100*j.offsetHeight:parseInt(t):j.offsetParent.offsetHeight;R(s(s({},H),{},{endScroll:e})),C(),L()}}(),function(){}}),[j]),e.useEffect((function(){return I(0),window.addEventListener("resize",M),function(){return window.removeEventListener("resize",M)}}),[]),i.default.createElement("div",{style:{position:"relative",width:"100%",height:"fit-content"}},i.default.createElement("div",{ref:b,style:{position:"relative",width:"100%",height:"fit-content",willChange:"transform, opacity, background"},className:v},y&&"function"==typeof y?y({isTransitioning:x>0&&x<1,inView:w}):y))},M=["children","className"],V=c.default.div(j||(F=["\n  width: 100%;\n  height: fit-content;\n"],A||(A=F.slice(0)),j=Object.freeze(Object.defineProperties(F,{raw:{value:Object.freeze(A)}})))),$=function(t){var e=t.children,n=t.className,r=f(t,M),o=C(s({},r)),a=o.ref,c=o.status;return i.default.createElement(V,{ref:a,className:n},e&&"function"==typeof e?e(c):e)};t.Parallax=L,t.UseParallax=$,t.getRGBA=k,t.useParallax=C}));
//# sourceMappingURL=index.js.map
