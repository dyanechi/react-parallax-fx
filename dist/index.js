"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-intersection-observer");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e);const o=e=>{const t=[];if("string"==typeof e){if(4===e.length?e+="f":7===e.length&&(e+="ff"),/^#[0-9a-fA-F]{8}$/i.test(e))e.replace("#","").split(/(..)/g).filter((e=>e)).forEach((e=>t.push(Number("0x"+e)))),t[t.length-1]=t[t.length-1]/255;else{if(!/^#[0-9a-fA-F]{4}$/i.test(e))throw new Error(`${e} is invalid. 'Color' must be valid Hex or RGBA value. `);e.replace("#","").split(/(.)/g).filter((e=>e)).forEach((e=>t.push(17*Number("0x"+e)))),t[t.length-1]=t[t.length-1]/255}return t}return e},s=(e,t,r,n)=>{if(e===t)return e;const o=e<t?t*r+(e-e*r):e-e*r+t*r;return n?n(o):o},i=(e,t,r)=>{let n=o(e),i=o(t);return n.map(((e,t)=>s(e,i[t],r)))};exports.Parallax=function({startScroll:r,endScroll:o,speed:a,opacity:l,transform:f,offset:c,background:u,gradient:d,filter:g,disabled:h,children:p}){const{ref:w,inView:m,entry:v}=t.useInView({});console.log(m);const b=v?.target,y=function(t){const[r,n]=e.useState(0);return e.useLayoutEffect((()=>{function e(){n(Math.floor(window.pageYOffset/t)*t)}return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)}),[]),r}(1),[E,$]=e.useState(0),S=e=>{switch(e){case"top":return y;case"center":return y+window.innerHeight/2;case"bottom":return y+window.innerHeight;default:return e||y}},[x,j]=e.useState({startScroll:S(r||"top"),endScroll:o?o.toString().includes("%")?1e3:parseInt(o.toString()):300,speed:(a||20)/100}),H=()=>{const e=v&&v.target;if(!e)return;const t=e.offsetParent.offsetTop+(c||0),r=t+x.endScroll-t,n=(x.startScroll+y-t)/r;$(n<0?0:n>1?1:n)},L=()=>{if(b){if(l){const e=s(...l,E);b.style.opacity=e.toFixed(3)}if(u){const e=i(...u,E);b.style.backgroundColor=`rgba(${e.join(",")}) `}else if(d){const{type:e,dir:t,start:r,end:n}=d;if(r.length<2||n.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(r.length!==n.length)throw new Error("'start' and 'end' array length must be the same");const o=[];for(let e=0;e<r.length;e++){const t=i(r[e],n[e],E);o.push(`rgba(${t.join(",")})`)}console.log(e,t,r,n),b.style.background=`${e||"linear"}-gradient(${t?t+"deg,":""}${o.join(",")})`}let e="";if(f){const{translate:t,translateX:r,translateY:n,scale:o,rotate:i}=f;if(t){e+=`translate(${s(...t[0],E)}px, ${s(...t[1],E)}px) `}else r?e+=`translateX(${s(...r,E)}px `:n&&(e+=`translateY(${s(...n,E)}px `);o&&(e+=`scale(${s(...o,E)}) `),i&&(e+=`rotate(${s(...i,E)}deg) `),""!==e&&(b.style.transform=e)}if(g){const e=s(...g.blur||[0,0],E);b.style.filter=`blur(${e}px) `}}};e.useEffect((()=>{if(!h)return H(),()=>{}}),[y]),e.useEffect((()=>{requestAnimationFrame(L)}),[E]);const k=()=>{j({...x,startScroll:S(r||"top")})};return e.useEffect((()=>((()=>{if(b){const e=o?.toString(),t=e?e.includes("%")?parseInt(e)/100*b.offsetHeight:parseInt(e):b.offsetParent.offsetHeight;j({...x,endScroll:t}),H(),L()}})(),()=>{})),[b]),e.useEffect((()=>($(0),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k))),[]),n.default.createElement("div",{style:{position:"relative",width:"100%",height:"fit-content"}},n.default.createElement("div",{ref:w,style:{position:"relative",width:"100%",height:"fit-content",willChange:"transform, opacity, background"}},p))};
//# sourceMappingURL=index.js.map
