!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("react-intersection-observer"),require("styled-components")):"function"==typeof define&&define.amd?define(["exports","react","react-intersection-observer","styled-components"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["react-parallax-pro"]={},t.React,t.reactIntersectionObserver,t.styled)}(this,(function(t,e,n,r){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=a(e),i=a(r);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){c=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t){var n=f(e.useState(0),2),r=n[0],a=n[1];return e.useLayoutEffect((function(){function e(){a(Math.floor(window.pageYOffset/t)*t)}return window.addEventListener("scroll",e),e(),function(){return window.removeEventListener("scroll",e)}}),[]),r}var h,m,y,b=function(t,e){if("number"==typeof t)return t;if("string"==typeof t){if(/[0-9]%$/g.test(t.toString()))return e?e*(parseInt(t)/100):parseInt(t)/100;if(/[0-9](px)$/g.test(t.toString()))return console.log("".concat(t," is in pixels!")),parseInt(t);if(/[0-9](em)$/g.test(t.toString()))return console.log("".concat(t," is in em!")),16*parseInt(t);if(/^[0-9](vh)$/g.test(t.toString()))return console.log("".concat(t," is in vh!")),parseInt(t)/100*window.innerHeight;if(/^[0-9](vw)$/g.test(t.toString()))return console.log("".concat(t," is in vw!")),parseInt(t)/100*window.innerWidth}return console.warn("Couldn't find any match for",t),0},w={TRANSFORM:["translate","translateX","translateY","scale","rotate"],FILTERS:["blur","brightness","contrast","grayscale","hueRotate","saturate","sepia","dropShadow"]},S=function(t){var e=[];if("string"==typeof t){if(/^#[0-9a-fA-F]{3}$/i.test(t)?t+="f":/^#[0-9a-fA-F]{6}$/i.test(t)&&(t+="ff"),/^#[0-9a-fA-F]{4}$/i.test(t))t.replace("#","").split(/(.)/g).filter((function(t){return t})).forEach((function(t){return e.push(17*Number("0x"+t))})),e[e.length-1]=e[e.length-1]/255;else{if(!/^#[0-9a-fA-F]{8}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "));t.replace("#","").split(/(..)/g).filter((function(t){return t})).forEach((function(t){return e.push(Number("0x"+t))})),e[e.length-1]=e[e.length-1]/255}return e}return t},E=function(t,e,n,r){if(t===e)return t;var a=t<e?e*n+(t-t*n):t-t*n+e*n;return r?r(a):a},F=function(t,e,n){var r=S(t),a=S(e);return r.map((function(t,e){return E(t,a[e],n)}))},O=function(t,e){var n={transform:{},filter:{}};return Object.entries(t).forEach((function(r){var a,o,i=f(r,1)[0],c={};if("gradient"===i)c.gradient={type:t.gradient.type,dir:[t.gradient.dir||0,(null===(a=e.gradient)||void 0===a?void 0:a.dir)||t.gradient.dir],start:t.gradient.colors,end:(null===(o=e.gradient)||void 0===o?void 0:o.colors)||t.gradient.colors};else if(w.FILTERS.includes(i)){var u;c.filter=l(l({},n.filter),{},s({},i,[t[i]||0,(null!==(u=e[i])&&void 0!==u?u:t[i])||0]))}else if(w.TRANSFORM.includes(i)){var d,g,p,v,h;c.transform=l(l({},n.transform),{},s({},i,"translate"===i?[[t.translate[0],(null!==(d=null==e||null===(g=e.translate)||void 0===g?void 0:g[0])&&void 0!==d?d:t.translate[0])||0],[t.translate[1],(null!==(p=null==e||null===(v=e.translate)||void 0===v?void 0:v[1])&&void 0!==p?p:t.translate[1])||0]]:[t[i]||0,(null!==(h=e[i])&&void 0!==h?h:t[i])||0]))}else{var m;c=s({},i,[t[i],null!==(m=e[i])&&void 0!==m?m:t[i]])}n=l(l({},n),c)})),n},x=function(t){if(!t)throw new Error("Animation not provided or is empty");var e={start:0,length:0},n={start:0,length:0};return Object.keys(t).forEach((function(r){if("gradient"===r){var a=t.gradient;e.gradient={type:a.type,dir:a.dir[0],colors:a.start},n.gradient={type:a.type,dir:a.dir[1],colors:a.end}}else if("translate"===r)e.translate=t.translate[0],n.translate=t.translate[1];else if("length"===r)e.length=b(t.length[0]),n.length=b(t.length[1]);else{var o=t[r];e[r]=o[0],n[r]=o[1]}})),console.info("Converted frames: ",[e,n]),[e,n]},j=function(){var t=f(e.useState({totalLength:0,frames:new Array,currentFrame:0,extend:!1,isInitialized:!1,ease:.1,easeFn:"linear",onChange:function(){}}),2),n=t[0],r=t[1];return e.useLayoutEffect((function(){}),[n.frames]),{get:n,init:function(t,e,a){if(n.isInitialized);else{var o=new Array,i=0,c={};t.forEach((function(e,n){var r=n>=t.length-1?t[t.length-1]:t[n+1];Object.assign(c,e.hold?{}:r,e),o.push(l(l({},c),{},{start:i+e.start})),i+=e.length})),r(l(l({},n),{},{frames:o,totalLength:i,isInitialized:!0,easeFn:e||"linear"})),a&&a(i)}},getLength:function(){return n.totalLength},getFrames:function(){return n.frames},getCurrentFrame:function(t){var e=function(t){var e=n.frames,a=t*n.totalLength;if(a>e[e.length-1].start)return r(l(l({},n),{},{currentFrame:e.length-1})),e.length-1;if(a<e[0].length)return r(l(l({},n),{},{currentFrame:0})),0;if(a>e[n.currentFrame].start&&a<e[n.currentFrame].length)return n.currentFrame;var o=0,i=0,c=e.length-1,s=Math.floor((c+i)/2),u=!1;for(;!u&&i<=c&&o<10;){o++;var f=e[s],d=f.start,g=d+f.length;if(a<d?c=s-1:a>g&&(i=s+1),u=d<a&&a<g)return r(l(l({},n),{},{currentFrame:s})),s;s=Math.floor((c+i)/2)}return n.currentFrame}(t),a=e>=n.frames.length-2?n.frames.length-1:e+1,o=n.frames[e],i=n.frames[a],c=o.start/n.totalLength,s=c+o.length/n.totalLength,u=1/(s-c);return{curFrame:o,nextFrame:i,curProgress:"linear"===n.easeFn?u*t-s/(s-c)+1:(s-c)/(s-c)/(s-c)/(s-c)*(t-c)*(t-c)}},getAllFrames:function(){return n.frames},isInitialized:n.isInitialized}},A=function(t){var r=t.startScroll,a=t.endScroll,o=t.fadeIn,i=t.fadeOut,c=t.keyframes,s=t.offset,u=t.disabled,g=t.extend,p=t.ease,h=t.easeFn,m=t.onTransitionChange,y=n.useInView(),w=y.ref,S=y.inView,A=y.entry,I=null==A?void 0:A.target,T=v(1),P=f(e.useState({startScroll:N(r||"bottom"),endScroll:a?b(a):300,scrollHeight:0,offsetTop:0}),2),H=P[0],L=P[1],k=j(),z=function(t,n,r,a,o){var i=f(e.useState({current:0,previous:0,rounded:0,ease:Math.max(0,Math.min(1,null!=o?o:1))}),2),c=i[0],s=i[1],u=f(e.useState({start:0,end:0,scrollHeight:0}),2),d=u[0],g=u[1],p=f(e.useState({progress:0,isTransitioning:!1}),2),v=p[0],h=p[1],m=e.useCallback((function(){s(l(l({},c),{},{current:r,previous:c.previous+(c.current-c.previous)*c.ease,rounded:Math.round(c.previous)}));var t=(c.rounded-d.start)/d.scrollHeight;h(l(l({},v),{},{progress:t<0?0:t>1?1:t,isTransitioning:!!(t>0&&t<1)}))}),[r,c.rounded]);return e.useEffect((function(){requestAnimationFrame(m)}),[m]),e.useEffect((function(){var e=t+(a||0),r=e+n,o=r-e;g(l(l({},d),{},{start:e,end:r,scrollHeight:o}))}),[t,n,a]),l(l({},v),{},{scrollHeight:d.scrollHeight})}(H.offsetTop,H.endScroll,H.startScroll+T,s,p),C=z.progress,q=z.isTransitioning;function N(t){var e=document.documentElement.clientHeight;return"top"===t?T:"center"===t?T+e/2:"bottom"===t?T+e:s||T+e}function $(){for(var t=I.offsetTop,e=0,n=I.offsetParent;null!==n&&"BODY"!==n.tagName&&e<30;)t+=n.offsetTop,n=n.offsetParent,e++;return N(r||"top"),e>=30&&console.error("There is too much recursion within AnimationContainer component. Please check and fix if possible."),t}var M=function(){var t,e;I&&(I.style.background=function(t){if("string"==typeof t){if(0===t.length)return"";if(4===t.length?t+="f":7===t.length&&(t+="ff"),!/^#[0-9a-fA-F]{8}$/i.test(t)&&!/^#[0-9a-fA-F]{4}$/i.test(t))throw new Error("".concat(t," is invalid. 'Color' must be valid Hex or RGBA value. "))}return t}((null==o||null===(t=o.background)||void 0===t?void 0:t[0])||(null==i||null===(e=i.background)||void 0===e?void 0:e[0])||""),(c||o||i)&&requestAnimationFrame(D))};function R(t,e){var n=t.opacity,r=t.transform,a=t.background,o=t.gradient,i=t.filter,c=e;n&&(I.style.opacity=function(t,e){return E.apply(void 0,d(t).concat([e])).toFixed(3)}(d(n),c)).toString(),r&&(I.style.transform=function(t,e){var n=t.translate,r=t.translateX,a=t.translateY,o=t.scale,i=t.rotate,c="";if(n){var l=E.apply(void 0,d(n[0]).concat([e])),s=E.apply(void 0,d(n[1]).concat([e]));c+="translate(".concat(l,"px, ").concat(s,"px) ")}else r?c+="translateX(".concat(E.apply(void 0,d(r).concat([e])),"px) "):a&&(c+="translateY(".concat(E.apply(void 0,d(a).concat([e])),"px) "));return o&&(c+="scale(".concat(E.apply(void 0,d(o).concat([e])),") ")),i&&(c+="rotate(".concat(E.apply(void 0,d(i).concat([e])),"deg) ")),c}(l({},r),c)),a&&(I.style.backgroundColor=function(t,e){var n=F.apply(void 0,d(t).concat([e]));return"rgba(".concat(n.join(","),") ")}(d(a),c)),o&&(I.style.background=function(t,e){var n=t.type,r=t.dir,a=t.start,o=t.end;if(a.length<2||o.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(a.length!==o.length)throw new Error("'start' and 'end' array length must be the same");for(var i=[],c=0;c<a.length;c++){var l=F(a[c],o[c],e);i.push("rgba(".concat(l.join(","),")"))}var s=r&&"radial"!==n?E.apply(void 0,d(r).concat([e]))+"deg,":"";return"".concat(n&&n||"linear","-gradient(").concat(s).concat(i.join(","),")")}(l({},o),c)),i&&(I.style.filter=function(t,e){var n=t.blur,r=t.brightness,a=t.contrast,o=t.dropShadow,i=t.grayscale,c=t.hueRotate,l=t.opacity,s=t.saturate,u=t.sepia,f="";return n&&(f+="blur(".concat(E.apply(void 0,d(n).concat([e])),"px) ")),r&&(f+="brightness(".concat(E.apply(void 0,d(r).concat([e])),"%) ")),a&&(f+="contrast(".concat(E.apply(void 0,d(a).concat([e])),"%) ")),i&&(f+="grayscale(".concat(E.apply(void 0,d(i).concat([e])),"%) ")),c&&(f+="hue-rotate(".concat(E.apply(void 0,d(c).concat([e])),"deg) ")),l&&(f+="opacity(".concat(E.apply(void 0,d(l).concat([e])),"%) ")),s&&(f+="saturate(".concat(E.apply(void 0,d(s).concat([e])),"%) ")),u&&(f+="sepia(".concat(E.apply(void 0,d(u).concat([e])),"%) ")),o&&(f+="drop-shadow(".concat(E.apply(void 0,d(o).concat([e])),"px) ")),f}(l({},i),c))}function Y(){if(k.isInitialized){var t=k.getCurrentFrame(C),e=t.curFrame,n=t.nextFrame,r=O(e,n);(isNaN(C)||C<=0)&&requestAnimationFrame((function(){return R(r,0)})),C>=1&&requestAnimationFrame((function(){return R(r,1)}))}}function V(){if(!k.isInitialized){var t=new Array;Object.assign(t,c||function(){var t=new Array,e=x(o||[]),n=x(i||[]),r=Math.max(H.endScroll,I.offsetHeight,b((null==o?void 0:o.length)||0)+b((null==i?void 0:i.length)||0));if(o){var a=b(o.length,r);e[0].length=a,e[1].start=a,Object.assign(t,e)}if(i){var c=b(i.length,r);n[0]=l(l({},n[0]),{},{start:r-c,length:c}),n[1].start=r,e?e[1]=l(l({},e[1]),{},{length:r-c}):n=[{start:0,length:r-c}].concat(d(n)),t=[].concat(d(t),d(n))}return t}());var e=t.map((function(t){return l(l({},t),{},{start:0,length:b(t.length,I.offsetHeight)})}));if(e.length<2)throw new Error("Must provide at least 2 keyframes");k.init(e,h,(function(t){g&&t>H.scrollHeight?(L(l(l({},H),{},{scrollHeight:t,endScroll:t,offsetTop:$()})),I&&window.addEventListener("resize",(function(){return X(t,t)}))):I&&window.addEventListener("resize",(function(){return X(H.endScroll,t)})),requestAnimationFrame(Y)}))}}function D(){if(!k.isInitialized)return V();var t=k.getCurrentFrame(C),e=t.curFrame,n=t.nextFrame,r=t.curProgress,a=O(e,n);requestAnimationFrame((function(){return R(a,r)}))}var X=function(t,e){L(l(l({},H),{},{endScroll:t,scrollHeight:e,startScroll:N(r||"bottom"),offsetTop:$()}))};return e.useLayoutEffect((function(){!u&&q&&k.isInitialized&&requestAnimationFrame(D)}),[C,q,k.isInitialized,u]),e.useLayoutEffect((function(){I&&requestAnimationFrame(Y),m&&m()}),[q,m,I,k.isInitialized]),e.useEffect((function(){M()}),[I]),e.useEffect((function(){}),[]),{ref:w,status:{isTransitioning:q,inView:S}}},I={startScroll:"bottom",ease:.1,easeFn:"linear",offset:0,extend:!0},T=e.createContext(I),P=["children","className"],H=i.default.div(h||(m=["\n  width: 100%;\n  height: fit-content;\n"],y||(y=m.slice(0)),h=Object.freeze(Object.defineProperties(m,{raw:{value:Object.freeze(y)}}))));t.LegacyParallax=function(t){var r=t.startScroll,a=t.endScroll,i=t.speed,c=t.opacity,s=t.transform,u=t.offset,g=t.background,p=t.gradient,h=t.filter,m=t.disabled,y=t.className,b=t.children,w=n.useInView({}),S=w.ref,O=w.inView,x=w.entry,j=null==x?void 0:x.target,A=v(1),I=f(e.useState(0),2),T=I[0],P=I[1],H=function(t){switch(t){case"top":return document.documentElement.scrollTop;case"center":return+document.documentElement.scrollTop+document.documentElement.clientHeight/2;case"bottom":return+document.documentElement.scrollTop+document.documentElement.clientHeight;default:return t||+document.documentElement.scrollTop+document.documentElement.clientHeight}},L=f(e.useState({startScroll:H(r||"top"),endScroll:a?a.toString().includes("%")?1e3:parseInt(a.toString()):300,speed:(i||20)/100}),2),k=L[0],z=L[1],C=function(){if(j){var t=j.offsetParent.offsetTop+(u||0),e=t+k.endScroll-t,n=(k.startScroll+A-t)/e;P(n<0?0:n>1?1:n)}},q=function(){if(j){if(c){var t=E.apply(void 0,d(c).concat([T]));j.style.opacity=t.toFixed(3)}if(g){var e=F.apply(void 0,d(g).concat([T]));j.style.backgroundColor="rgba(".concat(e.join(","),") ")}else if(p){var n=p.type,r=p.dir,a=p.start,o=p.end;if(a.length<2||o.length<2)throw new Error("'start' and 'end' must have at least 2 elements");if(a.length!==o.length)throw new Error("'start' and 'end' array length must be the same");for(var i=[],l=0;l<a.length;l++){var u=F(a[l],o[l],T);i.push("rgba(".concat(u.join(","),")"))}var f=r&&"radial"!==n?E.apply(void 0,d(r).concat([T]))+"deg,":"";console.log(n,r,a,o),console.log("".concat(n&&n||"linear","-gradient(").concat(f).concat(i.join(" "),")")),j.style.background="".concat(n&&n||"linear","-gradient(").concat(f).concat(i.join(","),")")}var v="";if(s){var m=s.translate,y=s.translateX,b=s.translateY,w=s.scale,S=s.rotate;if(m){var O=E.apply(void 0,d(m[0]).concat([T])),x=E.apply(void 0,d(m[1]).concat([T]));v+="translate(".concat(O,"px, ").concat(x,"px) ")}else y?v+="translateX(".concat(E.apply(void 0,d(y).concat([T])),"px) "):b&&(v+="translateY(".concat(E.apply(void 0,d(b).concat([T])),"px) "));w&&(v+="scale(".concat(E.apply(void 0,d(w).concat([T])),") ")),S&&(v+="rotate(".concat(E.apply(void 0,d(S).concat([T])),"deg) ")),""!==v&&(j.style.transform=v)}if(h){var A=E.apply(void 0,d(h.blur||[0,0]).concat([T]));j.style.filter="blur(".concat(A,"px) ")}}};e.useEffect((function(){if(!m)return C(),function(){}}),[A]),e.useEffect((function(){requestAnimationFrame(q)}),[T]);var N=function(){z(l(l({},k),{},{startScroll:H(r||"top")}))};return e.useEffect((function(){return function(){if(j){console.log(O);var t=null==a?void 0:a.toString(),e=t?t.includes("%")?parseInt(t)/100*j.offsetHeight:parseInt(t):j.offsetParent.offsetHeight;z(l(l({},k),{},{endScroll:e})),C(),q()}}(),function(){}}),[j]),e.useEffect((function(){return P(0),window.addEventListener("resize",N),function(){return window.removeEventListener("resize",N)}}),[]),o.default.createElement("div",{style:{position:"relative",width:"100%",height:"fit-content"}},o.default.createElement("div",{ref:S,style:{position:"relative",width:"100%",height:"fit-content",willChange:"transform, opacity, background"},className:y},b&&"function"==typeof b?b({isTransitioning:T>0&&T<1,inView:O}):b))},t.UseParallax=function(t){var n=t.children,r=t.className,a=u(t,P),i=e.useContext(T),c=A(i?Object.assign({},i,l({},a)):l({},a)),s=c.ref,f=c.status;return o.default.createElement(H,{ref:s,className:r},n&&"function"==typeof n?n(f):n)},t.UseParallaxProvider=function(t){var e=t.children,n=t.config;return o.default.createElement(T.Provider,{value:Object.assign({},I,n)},e)},t.useParallax=A}));
//# sourceMappingURL=index.js.map
